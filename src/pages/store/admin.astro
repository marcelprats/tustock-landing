---
import StoreAdminLayout from '~/layouts/StoreAdminLayout.astro';
// Tu dashboard (asegúrate que SOLO tenga divs, no layouts)
import AppDashboard from '~/components/app/AppDashboard.astro'; 

const { currentShop } = Astro.locals;
const session = Astro.cookies.get('session');

if (!session) return Astro.redirect('/login');

const metadata = { title: `Admin ${currentShop?.name}` };
---

<StoreAdminLayout tenant={currentShop.slug} metadata={metadata}>
  
  {/* Aquí inyectamos el contenido limpio */}
  <div class="max-w-6xl mx-auto">
      <div class="mb-6">
          <h1 class="text-2xl font-bold text-gray-800 dark:text-white">Panel General</h1>
          <p class="text-gray-500 text-sm">Bienvenido a la gestión de {currentShop.name}</p>
      </div>

      {/* El dashboard se carga aquí dentro */}
      <AppDashboard tenantId={currentShop.slug} />
  </div>

</StoreAdminLayout>