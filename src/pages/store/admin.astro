---
import StoreAdminLayout from '~/layouts/StoreAdminLayout.astro';
// IMPORTAMOS EL COMPONENTE NUEVO QUE ACABAMOS DE CREAR
import StoreDashboard from '~/components/store/admin/StoreDashboard.astro'; 

const { currentShop } = Astro.locals;
const session = Astro.cookies.get('session');

if (!session) return Astro.redirect('/login');

const metadata = { title: `Panel - ${currentShop?.name}` };
---

<StoreAdminLayout tenant={currentShop.slug} metadata={metadata}>
  
  {/* Cabecera Interna */}
  <div class="mb-8">
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
        Panel de {currentShop.name}
      </h1>
      <p class="text-sm text-gray-500">Bienvenido a tu centro de gesti√≥n.</p>
  </div>

  {/* Cargamos el Dashboard LIMPIO */}
  <StoreDashboard tenantId={currentShop.slug} />

</StoreAdminLayout>