---
import Layout from '~/layouts/layout.astro';
import StoreDashboard from '~/components/store/admin/StoreDashboard.astro'; 

const { currentShop } = Astro.locals;
const session = Astro.cookies.get('session');

// Si no hay login, fuera
if (!session) return Astro.redirect('/login');

const metadata = { title: `Admin - ${currentShop?.name}` };
---

<Layout tenant={currentShop.slug} metadata={metadata}>
  <div class="max-w-6xl mx-auto">
      <div class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Resumen</h2>
        <p class="text-gray-500">Bienvenido al panel de control de {currentShop.name}.</p>
      </div>

      <StoreDashboard tenantId={currentShop.slug} />
  </div>
</Layout>