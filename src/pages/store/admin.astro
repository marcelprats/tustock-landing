---
import Layout from '~/layouts/Layout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import StoreDashboard from '~/components/store/admin/StoreDashboard.astro'; 

const { currentShop } = Astro.locals;
const session = Astro.cookies.get('session');

if (!session) return Astro.redirect('/login');

const metadata = { title: `Admin - ${currentShop?.name}` };
---

<Layout tenant={currentShop.slug} metadata={metadata}>
  
  {/* 1. CABECERA ESTILO LANDING */}
  <HeroText
    tagline="Panel de Control"
    title={currentShop.name}
    subtitle="VisiÃ³n general de tu negocio en tiempo real."
  />

  {/* 2. CONTENIDO DEL DASHBOARD */}
  <StoreDashboard tenantId={currentShop.slug} />

</Layout>