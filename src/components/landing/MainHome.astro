---
import Layout from '~/layouts/PageLayout.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Features2 from '~/components/widgets/Features2.astro'; // <--- NUEVO IMPORT
import Stats from '~/components/widgets/Stats.astro';
import Brands from '~/components/widgets/Brands.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

const metadata = {
  title: 'TuStock ‚Äî El ERP H√≠brido con IA que se adapta a tu escala',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  
  {/* 1. HERO: Mensaje Global */}
  <Hero2
    tagline="Gesti√≥n de Inventario Inteligente"
    actions={[
      { variant: 'primary', text: 'Empezar Gratis', href: '#pricing', icon: 'tabler:arrow-down' },
      { text: 'Ver tecnolog√≠a', href: '#features' },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?auto=format&fit=crop&w=2000&q=80',
      alt: 'TuStock Dashboard IA',
    }}
  >
    <Fragment slot="title">
      La potencia de la <span class="text-blue-600 dark:text-blue-400 highlight">IA</span> unida a la seguridad <span class="text-accent dark:text-purple-400 highlight">Local</span>
    </Fragment>
    
    <Fragment slot="subtitle">
      El √∫nico sistema del mercado que escala desde una peque√±a tienda de barrio hasta una multinacional log√≠stica sin cambiar de plataforma.
    </Fragment>
  </Hero2>

  <Brands
    title="Plataforma construida sobre gigantes"
    icons={[]} 
    images={[
      { src: 'https://cdn.worldvectorlogo.com/logos/docker.svg', alt: 'Docker' },
      { src: 'https://cdn.worldvectorlogo.com/logos/cloudflare-1.svg', alt: 'Cloudflare' },
      { src: 'https://cdn.worldvectorlogo.com/logos/react-2.svg', alt: 'React' },
      { src: 'https://cdn.worldvectorlogo.com/logos/stripe-4.svg', alt: 'Stripe' },
    ]}
  />

  {/* 2. CARACTER√çSTICAS (Nuevo: Para que funcionen los anclas del men√∫) */}
  <div id="features">
    <Features2
      title="¬øPor qu√© TuStock?"
      subtitle="La soluci√≥n h√≠brida que lo cambia todo."
      items={[
        {
          title: 'IA en tu bolsillo',
          description: 'Escanea productos y facturas con la c√°mara del m√≥vil. Nuestra IA reconoce los datos autom√°ticamente.',
          icon: 'tabler:scan',
        },
        {
          title: 'Funciona Offline (Local-First)',
          description: 'Si se cae internet, tu tienda sigue vendiendo. Los datos se sincronizan autom√°ticamente al volver.',
          icon: 'tabler:wifi-off',
        },
        {
          title: 'Multitienda Real',
          description: 'Gestiona N negocios desde un solo panel. Cambia de la ferreter√≠a a la cafeter√≠a en un clic.',
          icon: 'tabler:building-store',
        },
      ]}
    />
  </div>

  {/* 3. EL GRAN INTERCAMBIADOR DE NEGOCIO (DISE√ëO APPLE) */}
  <section id="pricing" class="py-20 bg-gray-50 dark:bg-slate-900 transition-colors duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold font-heading mb-4">Elige tu escala</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">Tecnolog√≠a que crece contigo.</p>
      </div>

      {/* TABS ESTILO APPLE (Segmented Control Moderno) */}
      <div class="flex justify-center mb-16">
        <div class="relative bg-gray-200 dark:bg-slate-800 p-1.5 rounded-full inline-flex">
           <button id="btn-local" class="relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 bg-white dark:bg-blue-600 text-black dark:text-white shadow-sm">
             üè™ Peque√±o Comercio
           </button>
           <button id="btn-enterprise" class="relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
             üè≠ Gran Empresa
           </button>
        </div>
      </div>

      {/* CONTENEDOR 1: PEQUE√ëO COMERCIO */}
      <div id="content-local" class="animate-fade-in">
        
        {/* Explicaci√≥n Local */}
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h3 class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-4">Digitalizaci√≥n sin complicaciones</h3>
          <p class="text-lg text-gray-600 dark:text-gray-300">
            Olv√≠date de servidores. Usa tu propio ordenador como servidor y tu m√≥vil como esc√°ner. 
          </p>
        </div>

        {/* PRECIOS LOCAL */}
        <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
          {/* Plan GRATIS */}
          <div class="bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-lg border border-gray-100 dark:border-slate-700 flex flex-col hover:border-blue-300 transition-colors">
            <h4 class="text-2xl font-bold mb-2">Gratis</h4>
            <p class="text-gray-500 mb-6 text-sm">Para empezar hoy mismo.</p>
            <div class="text-4xl font-bold mb-6">0‚Ç¨</div>
            <ul class="space-y-4 mb-8 flex-1 text-sm">
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> 1 Usuario</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> 100 Productos</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Subdominio Gratis</li>
            </ul>
            <a href="/register" class="block w-full py-3 text-center border-2 border-gray-200 dark:border-slate-600 font-bold rounded-xl hover:border-blue-600 hover:text-blue-600 transition">
              Crear Cuenta
            </a>
          </div>

          {/* Plan PRO */}
          <div class="bg-gradient-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900 rounded-3xl p-8 shadow-xl border-2 border-blue-500 relative flex flex-col transform md:-translate-y-4">
            <div class="absolute top-0 right-0 bg-blue-600 text-white px-3 py-1 rounded-bl-xl rounded-tr-xl text-xs font-bold tracking-wider">POPULAR</div>
            <h4 class="text-2xl font-bold mb-2">Pro</h4>
            <p class="text-gray-500 mb-6 text-sm">Sin l√≠mites.</p>
            <div class="text-4xl font-bold mb-6">29‚Ç¨ <span class="text-sm font-normal text-gray-400">/mes</span></div>
            <ul class="space-y-4 mb-8 flex-1 text-sm font-medium">
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Usuarios Ilimitados</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Productos Ilimitados</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> IA Facturas Ilimitada</li>
            </ul>
            <a href="/register" class="block w-full py-3 text-center bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-500/30">
              Prueba 14 d√≠as gratis
            </a>
          </div>
        </div>
      </div>

      {/* CONTENEDOR 2: GRAN EMPRESA */}
      <div id="content-enterprise" class="hidden animate-fade-in">
        <div class="text-center max-w-2xl mx-auto mb-10">
           <p class="text-purple-600 dark:text-purple-400 font-bold text-xl">Arquitectura H√≠brida Distribuida</p>
           <p class="text-sm text-gray-500 mt-2">Despliegue On-Premise (Docker) con sincronizaci√≥n nube.</p>
           
           
           
        </div>

        <div class="grid md:grid-cols-3 gap-6 max-w-6xl mx-auto">
          {/* Developer */}
          <div class="bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-md border border-gray-200 dark:border-slate-700 opacity-75 hover:opacity-100 transition">
            <h4 class="text-lg font-bold">Developer</h4>
            <div class="text-3xl font-bold mt-2 mb-4">0‚Ç¨</div>
            <ul class="space-y-2 text-xs mb-6 text-gray-500">
               <li>‚Ä¢ Sandbox API</li>
               <li>‚Ä¢ 1 Nodo Local Docker</li>
            </ul>
            <a href="/register" class="block w-full py-2 border rounded-lg text-sm font-bold text-center">Crear Token</a>
          </div>

          {/* Business */}
          <div class="bg-slate-900 text-white rounded-3xl p-6 shadow-2xl border border-purple-500 relative transform md:-translate-y-4">
            <h4 class="text-lg font-bold text-purple-300">Business</h4>
            <div class="text-3xl font-bold mt-2 mb-4">99‚Ç¨ <span class="text-xs font-normal opacity-50">/sede</span></div>
            <ul class="space-y-3 text-sm mb-6">
               <li class="flex gap-2">‚ö° Nodos Docker Ilimitados</li>
               <li class="flex gap-2">üîÑ Sync Multi-Sede</li>
               <li class="flex gap-2">üõ°Ô∏è SLA 99.9%</li>
            </ul>
            <a href="mailto:sales@tustock.app" class="block w-full py-3 text-center bg-purple-600 rounded-lg text-sm font-bold hover:bg-purple-500 transition">Contactar</a>
          </div>

          {/* Custom */}
          <div class="bg-gray-100 dark:bg-slate-800 rounded-3xl p-6 border border-gray-200 dark:border-slate-700">
             <h4 class="text-lg font-bold">Enterprise</h4>
             <div class="text-3xl font-bold mt-2 mb-4">Custom</div>
             <p class="text-xs text-gray-500 mb-6">Log√≠stica masiva e integraciones SAP/Sage.</p>
             <button class="w-full py-2 bg-gray-200 dark:bg-slate-700 rounded-lg text-sm font-bold">Hablar</button>
          </div>
        </div>
      </div>

    </div>
  </section>

  <Stats
    stats={[
      { title: 'Peticiones API procesadas', amount: '+1M' },
      { title: 'Nodos Locales Activos', amount: '+500' },
      { title: 'Tiempo de respuesta (Local)', amount: '<10ms' },
    ]}
  />

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Empezar ahora',
        href: '/register',
        icon: 'tabler:rocket',
      },
    ]}
  >
    <Fragment slot="title">
      ¬øPreparado para escalar?
    </Fragment>
    <Fragment slot="subtitle">
      Tanto si vendes tornillos en el barrio como si distribuyes palets en Europa, TuStock es tu motor.
    </Fragment>
  </CallToAction>
</Layout>

{/* SCRIPT PARA LA MAGIA DEL INTERCAMBIADOR (ACTUALIZADO AL NUEVO DISE√ëO) */}
<script>
  const btnLocal = document.getElementById('btn-local');
  const btnEnterprise = document.getElementById('btn-enterprise');
  const contentLocal = document.getElementById('content-local');
  const contentEnterprise = document.getElementById('content-enterprise');

  function setLocal() {
    // Estilos Botones (Simulando switch Apple)
    btnLocal.className = "relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 bg-white dark:bg-blue-600 text-black dark:text-white shadow-sm";
    btnEnterprise.className = "relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white";
    
    // Contenido
    contentLocal.classList.remove('hidden');
    contentEnterprise.classList.add('hidden');
  }

  function setEnterprise() {
    // Estilos Botones
    btnEnterprise.className = "relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 bg-white dark:bg-purple-600 text-black dark:text-white shadow-sm";
    btnLocal.className = "relative z-10 px-8 py-2.5 rounded-full text-sm font-bold transition-all duration-300 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white";

    // Contenido
    contentEnterprise.classList.remove('hidden');
    contentLocal.classList.add('hidden');
  }

  btnLocal?.addEventListener('click', setLocal);
  btnEnterprise?.addEventListener('click', setEnterprise);
</script>

<style>
  .animate-fade-in {
    animation: fadeIn 0.4s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
