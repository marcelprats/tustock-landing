---
import Layout from '~/layouts/PageLayout.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Stats from '~/components/widgets/Stats.astro';
import Brands from '~/components/widgets/Brands.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

const metadata = {
  title: 'TuStock ‚Äî El ERP H√≠brido con IA que se adapta a tu escala',
  ignoreTitleTemplate: true,
};
---

<Layout metadata={metadata}>
  
  {/* 1. HERO: Mensaje Global */}
  <Hero2
    tagline="Gesti√≥n de Inventario Inteligente"
    actions={[
      { variant: 'primary', text: 'Empezar Gratis', href: '#planes-selector', icon: 'tabler:arrow-down' },
      { text: 'Ver tecnolog√≠a', href: '#features' },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?auto=format&fit=crop&w=2000&q=80',
      alt: 'TuStock Dashboard IA',
    }}
  >
    <Fragment slot="title">
      La potencia de la <span class="text-blue-600 dark:text-blue-400 highlight">IA</span> unida a la seguridad <span class="text-accent dark:text-purple-400 highlight">Local</span>
    </Fragment>
    
    <Fragment slot="subtitle">
      El √∫nico sistema del mercado que escala desde una peque√±a tienda de barrio hasta una multinacional log√≠stica sin cambiar de plataforma.
    </Fragment>
  </Hero2>

  <Brands
    title="Plataforma construida sobre gigantes"
    icons={[]} 
    images={[
      { src: 'https://cdn.worldvectorlogo.com/logos/docker.svg', alt: 'Docker' },
      { src: 'https://cdn.worldvectorlogo.com/logos/cloudflare-1.svg', alt: 'Cloudflare' },
      { src: 'https://cdn.worldvectorlogo.com/logos/react-2.svg', alt: 'React' },
      { src: 'https://cdn.worldvectorlogo.com/logos/stripe-4.svg', alt: 'Stripe' },
    ]}
  />

  {/* 2. EL GRAN INTERCAMBIADOR DE NEGOCIO */}
  <section id="planes-selector" class="py-20 bg-gray-50 dark:bg-slate-900 transition-colors duration-300">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold font-heading mb-4">Elige tu modelo de negocio</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400">Te mostramos la tecnolog√≠a y los precios adaptados a tu realidad.</p>
      </div>

      {/* BOTONES DE CAMBIO (TABS) */}
      <div class="flex justify-center mb-16">
        <div class="bg-white dark:bg-slate-800 p-2 rounded-2xl shadow-lg inline-flex gap-2 border border-gray-200 dark:border-slate-700">
          <button id="btn-local" class="px-8 py-3 rounded-xl font-bold text-lg transition-all duration-300 bg-blue-600 text-white shadow-md">
            üè™ Peque√±o Comercio
          </button>
          <button id="btn-enterprise" class="px-8 py-3 rounded-xl font-bold text-lg transition-all duration-300 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700">
            üè≠ Gran Empresa
          </button>
        </div>
      </div>

      {/* CONTENEDOR 1: PEQUE√ëO COMERCIO */}
      <div id="content-local" class="animate-fade-in">
        
        {/* Explicaci√≥n Local */}
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h3 class="text-2xl font-bold text-blue-600 dark:text-blue-400 mb-4">Digitalizaci√≥n sin complicaciones</h3>
          <p class="text-lg text-gray-600 dark:text-gray-300">
            Olv√≠date de servidores y t√©cnicos. Usa tu propio ordenador como servidor local y tu m√≥vil como esc√°ner. 
            Ideal para tiendas, ferreter√≠as, talleres y retail.
          </p>
        </div>

        {/* PRECIOS LOCAL (2 PLANES) */}
        <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
          {/* Plan GRATIS Local */}
          <div class="bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-xl border border-gray-100 dark:border-slate-700 flex flex-col">
            <div class="mb-4">
              <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold uppercase">Starter</span>
            </div>
            <h4 class="text-3xl font-bold mb-2">Gratis</h4>
            <p class="text-gray-500 mb-6">Para empezar a digitalizarte.</p>
            <ul class="space-y-4 mb-8 flex-1">
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> 1 Usuario</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Hasta 100 Productos</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Escaneo IA B√°sico</li>
              <li class="flex gap-3"><span class="text-blue-600">‚úì</span> Subdominio .tustock.app</li>
            </ul>
            <a href="/signup" class="block w-full py-4 text-center border-2 border-blue-600 text-blue-600 dark:text-blue-400 font-bold rounded-xl hover:bg-blue-50 dark:hover:bg-slate-700 transition">
              Crear Cuenta Gratis
            </a>
          </div>

          {/* Plan DE PAGO Local */}
          <div class="bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-2xl border-2 border-blue-600 relative flex flex-col transform md:-translate-y-4">
            <div class="absolute top-0 right-0 bg-blue-600 text-white px-4 py-1 rounded-bl-xl rounded-tr-xl text-sm font-bold">
              RECOMENDADO
            </div>
            <h4 class="text-3xl font-bold mb-2">29‚Ç¨ <span class="text-lg font-normal text-gray-500">/mes</span></h4>
            <p class="text-gray-500 mb-6">Para negocios activos.</p>
            <ul class="space-y-4 mb-8 flex-1">
              <li class="flex gap-3"><span class="text-blue-600 font-bold">‚úì</span> Usuarios Ilimitados</li>
              <li class="flex gap-3"><span class="text-blue-600 font-bold">‚úì</span> Productos Ilimitados</li>
              <li class="flex gap-3"><span class="text-blue-600 font-bold">‚úì</span> Alertas Telegram Stock Bajo</li>
              <li class="flex gap-3"><span class="text-blue-600 font-bold">‚úì</span> IA Avanzada (Facturas ilimitadas)</li>
            </ul>
            <a href="/signup" class="block w-full py-4 text-center bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition shadow-lg shadow-blue-500/30">
              Prueba de 14 d√≠as
            </a>
          </div>
        </div>
      </div>

      {/* CONTENEDOR 2: GRAN EMPRESA */}
      <div id="content-enterprise" class="hidden animate-fade-in">
        
        {/* Explicaci√≥n Enterprise */}
        <div class="text-center max-w-3xl mx-auto mb-12">
          <h3 class="text-2xl font-bold text-purple-600 dark:text-purple-400 mb-4">Infraestructura H√≠brida Distribuida</h3>
          <p class="text-lg text-gray-600 dark:text-gray-300">
            Despliega nodos locales (Docker) en cada nave industrial sincronizados v√≠a T√∫nel Seguro. 
            API Rest completa para integraci√≥n con SAP, Sage o E-commerce.
          </p>
        </div>

        {/* PRECIOS ENTERPRISE (3 PLANES) */}
        <div class="grid md:grid-cols-3 gap-6 max-w-6xl mx-auto">
          
          {/* 1. Plan PILOTO (Gratis Empresa) */}
          <div class="bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-lg border border-gray-100 dark:border-slate-700 flex flex-col opacity-80 hover:opacity-100 transition">
            <h4 class="text-2xl font-bold mb-2">Developer / Pilot</h4>
            <p class="text-3xl font-bold mb-4">0‚Ç¨</p>
            <p class="text-sm text-gray-500 mb-6">Para validar la integraci√≥n API.</p>
            <ul class="space-y-3 mb-8 text-sm flex-1">
              <li class="flex gap-2"><span class="text-purple-600">‚úì</span> Acceso Sandbox API</li>
              <li class="flex gap-2"><span class="text-purple-600">‚úì</span> 1 Nodo Docker Local</li>
              <li class="flex gap-2"><span class="text-purple-600">‚úì</span> L√≠mite 1.000 req/mes</li>
            </ul>
            <a href="/signup" class="block w-full py-3 text-center border border-gray-300 text-gray-600 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700">
              Crear Token API
            </a>
          </div>

          {/* 2. Plan BUSINESS (Pago Normal) */}
          <div class="bg-slate-900 text-white rounded-3xl p-6 shadow-2xl border-2 border-purple-500 relative flex flex-col transform md:-translate-y-4">
            <div class="absolute top-0 right-0 bg-purple-600 text-white px-3 py-1 rounded-bl-xl rounded-tr-xl text-xs font-bold">
              PRODUCCI√ìN
            </div>
            <h4 class="text-2xl font-bold mb-2">Business</h4>
            <p class="text-4xl font-bold mb-4">99‚Ç¨ <span class="text-lg font-normal opacity-70">/sede</span></p>
            <p class="text-sm text-gray-300 mb-6">Para naves en funcionamiento.</p>
            <ul class="space-y-3 mb-8 text-sm flex-1">
              <li class="flex gap-2"><span class="text-purple-400">‚úì</span> Nodos Docker Ilimitados</li>
              <li class="flex gap-2"><span class="text-purple-400">‚úì</span> Sincronizaci√≥n Multi-Sede</li>
              <li class="flex gap-2"><span class="text-purple-400">‚úì</span> API Rate: 50k req/mes</li>
              <li class="flex gap-2"><span class="text-purple-400">‚úì</span> Soporte Ingeniero Dedicado</li>
            </ul>
            <a href="mailto:ventas@tustock.app" class="block w-full py-3 text-center bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition shadow-lg shadow-purple-900/50">
              Contactar Ventas
            </a>
          </div>

          {/* 3. Plan SUPER PREMIUM (Custom Volume) */}
          <div class="bg-gradient-to-br from-gray-100 to-gray-200 dark:from-slate-800 dark:to-slate-900 rounded-3xl p-6 shadow-lg border border-gray-200 dark:border-slate-700 flex flex-col">
            <h4 class="text-2xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600">High Volume</h4>
            <p class="text-3xl font-bold mb-4">Custom</p>
            <p class="text-sm text-gray-500 mb-6">Para log√≠stica masiva (>50k req).</p>
            <ul class="space-y-3 mb-8 text-sm flex-1">
              <li class="flex gap-2"><span class="text-gray-800 dark:text-gray-200">‚úì</span> Todo lo de Business</li>
              <li class="flex gap-2"><span class="text-gray-800 dark:text-gray-200">‚úì</span> <strong>API Ilimitada</strong></li>
              <li class="flex gap-2"><span class="text-gray-800 dark:text-gray-200">‚úì</span> Despliegue On-Premise Total</li>
              <li class="flex gap-2"><span class="text-gray-800 dark:text-gray-200">‚úì</span> SLA Garantizado 99.99%</li>
            </ul>
            <a href="mailto:partners@tustock.app" class="block w-full py-3 text-center bg-gray-800 dark:bg-white text-white dark:text-black font-bold rounded-xl hover:opacity-90 transition">
              Negociar Contrato
            </a>
          </div>

        </div>
      </div>

    </div>
  </section>

  <Stats
    stats={[
      { title: 'Peticiones API procesadas', amount: '+1M' },
      { title: 'Nodos Locales Activos', amount: '+500' },
      { title: 'Tiempo de respuesta (Local)', amount: '<10ms' },
    ]}
  />

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'Empezar ahora',
        href: '/signup',
        icon: 'tabler:rocket',
      },
    ]}
  >
    <Fragment slot="title">
      ¬øPreparado para escalar?
    </Fragment>
    <Fragment slot="subtitle">
      Tanto si vendes tornillos en el barrio como si distribuyes palets en Europa, TuStock es tu motor.
    </Fragment>
  </CallToAction>
</Layout>

{/* SCRIPT PARA LA MAGIA DEL INTERCAMBIADOR */}
<script>
  const btnLocal = document.getElementById('btn-local');
  const btnEnterprise = document.getElementById('btn-enterprise');
  const contentLocal = document.getElementById('content-local');
  const contentEnterprise = document.getElementById('content-enterprise');

  // Funci√≥n para activar Modo Local
  btnLocal.addEventListener('click', () => {
    // Estilos botones
    btnLocal.classList.add('bg-blue-600', 'text-white', 'shadow-md');
    btnLocal.classList.remove('text-gray-600', 'hover:bg-gray-100', 'dark:text-gray-300');
    
    btnEnterprise.classList.remove('bg-purple-600', 'text-white', 'shadow-md');
    btnEnterprise.classList.add('text-gray-600', 'hover:bg-gray-100', 'dark:text-gray-300', 'dark:hover:bg-slate-700');

    // Visibilidad Contenido
    contentLocal.classList.remove('hidden');
    contentEnterprise.classList.add('hidden');
  });

  // Funci√≥n para activar Modo Empresa
  btnEnterprise.addEventListener('click', () => {
    // Estilos botones
    btnEnterprise.classList.add('bg-purple-600', 'text-white', 'shadow-md');
    btnEnterprise.classList.remove('text-gray-600', 'hover:bg-gray-100', 'dark:text-gray-300');
    
    btnLocal.classList.remove('bg-blue-600', 'text-white', 'shadow-md');
    btnLocal.classList.add('text-gray-600', 'hover:bg-gray-100', 'dark:text-gray-300', 'dark:hover:bg-slate-700');

    // Visibilidad Contenido
    contentEnterprise.classList.remove('hidden');
    contentLocal.classList.add('hidden');
  });
</script>

<style>
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>